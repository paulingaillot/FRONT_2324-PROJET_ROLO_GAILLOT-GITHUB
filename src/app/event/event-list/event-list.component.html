<html>
  <head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  </head>
<app-header></app-header>
<br>

<div class="container" style="height: 500px;overflow-y:scroll;">
  <h4 style="color:#3B71CA;">Bienvenue {{user_actual}},</h4>
  <div class="table-wrapper" style="position: relative; height: 500px;">
    <div class="row mb-3">
      <div class="form-outline" style="width: 8rem;">
        <input min="0" [max]="selectedMaxPrice" type="number" id="minPriceInput" class="form-control" [(ngModel)]="selectedMinPrice">
        <label class="form-label" for="minPriceInput">Min Price</label>
    </div>
    <div class="form-outline" style="width: 8rem;">
        <input min="0" [max]="maxEventPrice"  type="number" id="maxPriceInput" class="form-control" [(ngModel)]="selectedMaxPrice">
        <label class="form-label" for="maxPriceInput">Max Price</label>
    </div>
    <div class="col">
      
      <button class="btn btn-sm" style="background-color:#A3B18A;" (click)="filterByPrice(selectedMinPrice, selectedMaxPrice)">Filtrer par prix</button>
  </div>
  <div class="col col-md-2"> 
    <select id="theme" class="form-control" [(ngModel)]="selectedTheme" name="theme" placeholder="Filter by Thème" required (change)="callfilterByTheme()">
      <option value="" disabled selected>Select a theme</option>
      <option [value]="'sport'">Sport</option>
      <option [value]="'culture'">Culture</option>
      <option [value]="'festif'">Festif</option>
      <option [value]="'pro'">Professionnel</option>
      <option [value]="'autres'">Autres</option>
    </select>
  </div>
  <div class="col">
    <div class="input-group">
        <div class="input-group-prepend">
           
            <button class="input-group-text"  (click)="filterByName(eventNameInput.value)">

                <i class="bi bi-search"></i>
            </button>
        </div>
    
        <input type="text" class="form-control" formControlName="name" placeholder="Filter by Name" #eventNameInput >
    
        
      
    </div>
</div>
    </div>
    <div class="row mb-3">
      
  </div>
    
    
    <table class="table  table-fixed table-hover table-light">
      <thead class="table-secondary" style="background-color:#A3B18A; position: sticky; top: 0; z-index: 1; display: line;">
        <tr>
          <th>Nom</th>
          <th>Image</th>
          <th>Thème</th>
          <th>
            <div class="d-flex align-items-center "><i class="bi bi-sort-up" (click)="sortByPriceAscending()" style="cursor: pointer;"></i>
              <span>Prix</span>
              <i class="bi bi-sort-down" (click)="sortByPriceDescending()" style="cursor: pointer;"></i></div>
            
          </th>
          <th>
            <div class="d-flex align-items-center ">
              <i class="bi bi-sort-up" (click)="sortByDateAscending()" style="cursor: pointer;"></i>
              <span>Date</span>
              <i class="bi bi-sort-down" (click)="sortByDateDescending()" style="cursor: pointer;"></i>
            
            </div>
           </th>
        </tr>
      </thead>
      <tbody style="overflow-y: scroll; display: line; height: 400px;">
        <tr *ngFor='let event of events' (click)="redirectToEventDetails(event._id)">
          
          <td>{{event.name}}</td>
          <td><img [src]="'data:image/jpeg;base64,' + event.image" style="width: 45px; height: 45px;"></td>  
          <td>{{event.theme}}</td>
          <td > {{event.prix}} €</td>
          <td>{{ event.date | date: 'medium' : 'UTC' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<br>
</html>
